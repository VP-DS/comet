import { Canvas, Meta, Story } from "@storybook/addon-docs";

<Meta title="Docs/Components/Tabs/Router Tabs" />

# Router Tabs

The Comet Admin `RouterTabs` component has essentially the same functionality as `Tabs`.
However, `RouterTabs` manages its state in the URL so that each tab has a unique URL.

`RouterTabs` has the following props:

-   `tabComponent` for passing a custom tab component. Per default, [Material UI's `Tab` component](https://v4.mui.com/api/tab/) is used
-   `tabsProps` for passing props to [Material UI's `Tabs` component](https://v4.mui.com/api/tabs/)

As children, an array of `RouterTab` elements should be passed to `RouterTabs`.
Each `RouterTab` needs:

-   a `label` that is shown in the tab bar
-   a unique `path` of the tab that is attached to the URL
-   optionally a [forceRender flag](#routertabs-and-forcerender)

<Canvas>
    <Story id="stories-components-tabs-routertabs--routertabs" />
</Canvas>

## RouterTabs and forceRender

RouterTabs has a prop called `forceRender`.
The default value is `false`, meaning the content is only rendered if the tab is active.
If set to `true`, the tab content is always rendered but hidden via CSS while the tab is not active.

There are two main use cases for the forceRender prop:

1. You want to preserve the state of components inside a tab.

In React, components are unmounted once they are not rendered anymore.
On unmount, the components lose their state.
With `forceRender` this unmount is prevented.

**Example:** You have implemented tabs.
One tab contains a form.
You don't want to lose the form content if the user switches the tab.

❌ Without `forceRender` the form content is lost after a tab switch

<Canvas>
    <Story id="stories-components-tabs-routertabs-forcerender--form-in-routertabs-without-forcerender" />
</Canvas>

✅ With `forceRender` the form content is preserved

<Canvas>
    <Story id="stories-components-tabs-routertabs-forcerender--form-in-routertabs-with-forcerender" />
</Canvas>

2. You implement a form whose fields are distributed over multiple tabs.

React Final Form "forgets" that fields exist once they are unmounted.
Therefore, the form is not marked as dirty anymore as soon as you switch to a tab containing only empty fields.

❌ Without `forceRender` the form is marked as pristine after switching from `Tab 1` to `Tab 2`.
This means that the user can't save their progress and can leave the page without getting a "Discard unsaved changes" dialog.

<Canvas>
    <Story id="stories-components-tabs-routertabs-forcerender--routertabs-in-form-without-forcerender" />
</Canvas>

✅ With `forceRender` the fields stay mounted and the form is correctly marked as dirty after a tab switch.
Saving is possible.

<Canvas>
    <Story id="stories-components-tabs-routertabs-forcerender--routertabs-in-form-with-forcerender" />
</Canvas>

## RouterTabs and Nested Stack

When used on a nested `StackPage`, `RouterTabs` automatically hides other `RouterTabs` on higher levels.
In this way, only the `RouterTabs` on the current level are shown.
That ensures that the UI doesn't appear cluttered with tabs.

<Canvas>
    <Story id="stories-components-tabs-nested-stackswitch-with-routertabs--nested-stackswitch-with-routertabs" />
</Canvas>
